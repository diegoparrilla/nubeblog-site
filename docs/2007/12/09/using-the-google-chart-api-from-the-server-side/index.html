<!DOCTYPE html>
<html lang="es-es">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.74.3" />

    
    
    

<title>Using the Google Chart API from the server side • Nubeblog</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using the Google Chart API from the server side"/>
<meta name="twitter:description" content="&lt;ul&gt; &lt;li&gt; commons-logging.jar &lt;/li&gt; &lt;li&gt; commons-httpclient-3.1.jar &lt;/li&gt; &lt;li&gt; commons-codec-1.3.jar &lt;/li&gt; &lt;/ul&gt; &lt;p&gt; The piece of code to perform the HTTP request is about 20 lines. You need to pass as an argument the parameters at the right hand side of this url&lt;br /&gt; &lt;blockquote style=&quot;font-family: courier new;&quot;&gt; http://chart.apis.google.com/chart?&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt; It returns an array of bytes with the image in PNG format. You only need to push it into the output stream of a servlet, or save it in a file like I do."/>

<meta property="og:title" content="Using the Google Chart API from the server side" />
<meta property="og:description" content="&lt;ul&gt; &lt;li&gt; commons-logging.jar &lt;/li&gt; &lt;li&gt; commons-httpclient-3.1.jar &lt;/li&gt; &lt;li&gt; commons-codec-1.3.jar &lt;/li&gt; &lt;/ul&gt; &lt;p&gt; The piece of code to perform the HTTP request is about 20 lines. You need to pass as an argument the parameters at the right hand side of this url&lt;br /&gt; &lt;blockquote style=&quot;font-family: courier new;&quot;&gt; http://chart.apis.google.com/chart?&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt; It returns an array of bytes with the image in PNG format. You only need to push it into the output stream of a servlet, or save it in a file like I do." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nubeblog.com/2007/12/09/using-the-google-chart-api-from-the-server-side/" />
<meta property="article:published_time" content="2007-12-09T01:30:00+00:00" />
<meta property="article:modified_time" content="2007-12-09T01:30:00+00:00" />


    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700|Source+Code+Pro:400,400i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@150,300&display=swap" rel="stylesheet">

    






<link rel="stylesheet" href="/scss/hyde-hyde.b2405b2542706431a038277d44dae5be8706d39d4333e5210dd1fec46c7bc419.css" integrity="sha256-skBbJUJwZDGgOCd9RNrlvocG051DM&#43;UhDdH&#43;xGx7xBk=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://nubeblog.com/">Nubeblog</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/2ad5d745c68bccc10421efde22f0f09b?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Señor de Logroño que hace cosas con ordenadores y programas. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Nubeblog</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/post/">
						<span> Todos Los Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://www.linkedin.com/in/diegoparrilla/">
						<span>About Me</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://www.linkedin.com/in/diegoparrilla/">
						<span>Sobre Mi</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/nubeblog" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/dparrilla" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/diegoparrilla" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/diegoparrilla" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Using the Google Chart API from the server side</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Dec 09, 2007
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/uncategorized">UNCATEGORIZED</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/api">api</a>
           
      
          <a class="badge badge-tag" href="/tags/chart">chart</a>
           
      
          <a class="badge badge-tag" href="/tags/development">development</a>
           
      
          <a class="badge badge-tag" href="/tags/google">google</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 3 min read
</div>


  </header>
  
  
  <div class="post">
    <!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>&lt;ul&gt;
  &lt;li&gt;
    commons-logging.jar
  &lt;/li&gt;
  &lt;li&gt;
    commons-httpclient-3.1.jar
  &lt;/li&gt;
  &lt;li&gt;
    commons-codec-1.3.jar
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
  The piece of code to perform the HTTP request is about 20 lines. You need to pass as an argument the parameters at the right hand side of this url&lt;br /&gt; 
  
  &lt;blockquote style=&quot;font-family: courier new;&quot;&gt;
    http://chart.apis.google.com/chart?&lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;p&gt;
    It returns an array of bytes with the image in PNG format. You only need to push it into the output stream of a servlet, or save it in a file like I do. Ok. here goes the snippet:
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;span style=&quot;font-family:courier new;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt;&lt;/span&gt;&lt;br /&gt; 
    
    &lt;blockquote&gt;
      &lt;span style=&quot;font-family:courier new;&quot;&gt; private String url_ = &amp;#8220;http://chart.apis.google.com/chart?&amp;#8221;;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; private int timeout_ = 30000; // milliseconds&lt;/span&gt;&lt;/p&gt; 
      
      &lt;p&gt;
        &lt;span style=&quot;font-family:courier new;&quot;&gt; public byte[] create(String postUrl) {&lt;/span&gt;
      &lt;/p&gt;
      
      &lt;p&gt;
        &lt;span style=&quot;font-family:courier new;&quot;&gt; HttpClient client = new HttpClient();&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; client.setConnectionTimeout(timeout_);&lt;/span&gt;
      &lt;/p&gt;
      
      &lt;p&gt;
        &lt;span style=&quot;font-family:courier new;&quot;&gt; String url = url_ + postUrl;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; HttpMethod method = null;&lt;/span&gt;
      &lt;/p&gt;
      
      &lt;p&gt;
        &lt;span style=&quot;font-family:courier new;&quot;&gt; method = new GetMethod(url);&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; method.setRequestHeader(&amp;#8220;accept&amp;#8221;, &amp;#8220;image/png&amp;#8221;);&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; byte[] image = null;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; try {&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; client.executeMethod(method);&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; image = method.getResponseBody();&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; } catch (Exception e) {&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; e.printStackTrace();&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; } finally {&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; method.releaseConnection();&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; return image;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; }&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family:courier new;&quot;&gt; }&lt;/span&gt;&lt;br /&gt; 
        
        &lt;blockquote&gt;
        &lt;/blockquote&gt;
        
        &lt;p&gt;
        &lt;/p&gt;&lt;/blockquote&gt; 
        
        &lt;p&gt;
          The rest of the class includes some helper methods that wraps the crazy encoding made by Google. The reason for this crazy encoding is to avoid the use of POST parameters normally harder to use in the client side. I have coded the class quick and dirt, so if you think it&amp;#8217;s possible to do it better you are probably right!
        &lt;/p&gt;
        
        &lt;p&gt;
          I have performed some tests and the latency of the service is excellent: it never took more 2.5 seconds to render a chart, taking from 300ms to 800ms on average. Normally the network latency of Google is very low (less than 100ms), so the time it takes to render a chart is excellent considering this is a very CPU time consuming activity. As a rule of thumb you should cache the requests made to the Google Servers to avoid requesting twice the same chart. You will respect the Terms of the Service (50000 request per day and user, remember!) and your users will be happy because they will get the charts without any delay.
        &lt;/p&gt;
        
        &lt;p&gt;
          Finally, I think it&amp;#8217;s worth to use this API instead of JFreeChart if you need to render a lot of charts with a very high granularity that impacts in the performance of your servers.
        &lt;/p&gt;
        
        &lt;p&gt;
          &lt;/div&gt;
</code></pre>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2007/12/07/google-chart-api-or-how-google-gives-raw-performance-for-free/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Google Chart API or how Google gives raw performance for free</span>
    </a>
    
    
    <a href="/2007/12/12/google-online-storage-system-rumours/" class="navigation-next">
      <span class="navigation-tittle">Google Online Storage System rumours</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  


<div class="post__related">
    
    <h2>Related Articles</h2>
    <ul class="related-posts">
        
<li>
  <span class="list__title--small">
    <a href="/2007/12/07/google-chart-api-or-how-google-gives-raw-performance-for-free/" >Google Chart API or how Google gives raw performance for free</a>
      
      <time class="pull-right hidden-tablet">Dec 07 &#39;07</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2007/11/12/the-ball-and-chain-of-iphone-was-not-java-its-google-android/" >The ball and chain of iPhone was not Java:  it&amp;#8217;s Google Android</a>
      
      <time class="pull-right hidden-tablet">Nov 12 &#39;07</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2007/11/05/social-bugfixing-tool-can-corank-com-work/" >Social bugfixing tool: Can corank.com work?</a>
      
      <time class="pull-right hidden-tablet">Nov 05 &#39;07</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2007/10/30/massive-refactoring-of-gmail-breaks-my-greasemonkey-scripts/" >Massive refactoring of Gmail breaks my Greasemonkey scripts</a>
      
      <time class="pull-right hidden-tablet">Oct 30 &#39;07</time>
      
  </span>
</li>

<li>
  <span class="list__title--small">
    <a href="/2007/09/04/google-phone-os-java-based/" >Google Phone OS Java based?</a>
      
      <time class="pull-right hidden-tablet">Sep 04 &#39;07</time>
      
  </span>
</li>


    </ul>
</div>



  
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5807955-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>




    



    </body>
</html>
