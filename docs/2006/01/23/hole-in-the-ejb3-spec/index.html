<!DOCTYPE html>
<html lang="es-es">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.74.3" />

    
    
    

<title>Hole in the EJB3 spec? • Nubeblog</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hole in the EJB3 spec?"/>
<meta name="twitter:description" content="One of the smartest moves in J2EE (or JEE, who cares…) is how Hibernate has influenced the Persistence API. You can smell the Hibernate flavor. This API is a light wrap of Hibernate. If you are familiar with Hibernate, POJOs and hbm.xml files, you can start working with EJB3 Entities.
One of the magical things of Hibernate is how to retrieve graphs of objects ‘lazily’. You can do things like:"/>

<meta property="og:title" content="Hole in the EJB3 spec?" />
<meta property="og:description" content="One of the smartest moves in J2EE (or JEE, who cares…) is how Hibernate has influenced the Persistence API. You can smell the Hibernate flavor. This API is a light wrap of Hibernate. If you are familiar with Hibernate, POJOs and hbm.xml files, you can start working with EJB3 Entities.
One of the magical things of Hibernate is how to retrieve graphs of objects ‘lazily’. You can do things like:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nubeblog.com/2006/01/23/hole-in-the-ejb3-spec/" />
<meta property="article:published_time" content="2006-01-23T23:18:00+00:00" />
<meta property="article:modified_time" content="2006-01-23T23:18:00+00:00" />


    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700|Source+Code+Pro:400,400i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@150,300&display=swap" rel="stylesheet">

    






<link rel="stylesheet" href="/scss/hyde-hyde.b2405b2542706431a038277d44dae5be8706d39d4333e5210dd1fec46c7bc419.css" integrity="sha256-skBbJUJwZDGgOCd9RNrlvocG051DM&#43;UhDdH&#43;xGx7xBk=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://nubeblog.com/">Nubeblog</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/2ad5d745c68bccc10421efde22f0f09b?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Señor de Logroño que hace cosas con ordenadores y programas. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Nubeblog</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/post/">
						<span> Todos Los Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://www.linkedin.com/in/diegoparrilla/">
						<span>About Me</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://www.linkedin.com/in/diegoparrilla/">
						<span>Sobre Mi</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/nubeblog" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/dparrilla" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/diegoparrilla" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/diegoparrilla" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Hole in the EJB3 spec?</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Jan 23, 2006
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/uncategorized">UNCATEGORIZED</a>
              
          
      
    
    
    
    <br/>
    <i class="fas fa-clock"></i> 3 min read
</div>


  </header>
  
  
  <div class="post">
    <!-- raw HTML omitted -->
<p>One of the smartest moves in J2EE (or JEE, who cares…) is how Hibernate has influenced the Persistence API. You can smell the Hibernate flavor. This API is a light wrap of Hibernate. If you are familiar with Hibernate, POJOs and hbm.xml files, you can start working with EJB3 Entities.</p>
<p>One of the magical things of Hibernate is how to retrieve graphs of objects ‘lazily’. You can do things like:</p>
<!-- raw HTML omitted -->
<p>and Hibernate takes care of retrieving information from the tables PROVINCE, COUNTRY and LANGUAGE to populate the mapped POJOs. The magic wand is what they call ‘Instrumentation’ of the POJOs: They manipulate the bytecode in runtime thanks to the cglib library.</p>
<p>This approach has a lot of advantages, but a little disadvantage. If you want to transfer an instrumented POJO from one application to another application using RMI (or CORBA), you will need all the Hibernate libraries in both sides. Why? Because the instrumented POJO references Hibernate classes. This process is done transparently to the developer (and this is great!), but it arises as something annoying when using remote invocations. A couple of years ago, I tried to use Hibernate POJOs inside SLSB EJBs, and instead of using Transfer Objects, I used the same instrumented POJOs. It worked, but I had to put in my remote client the Hibernate jars, and I had to be cautious using lazy fetching of data. But it worked.</p>
<p>Now we have started a project with a mid-term roadmap, and we are going to use the new EJB3 spec on JBoss Application Server. One of the requirements is that maybe in a not so near future, the web layer is going to be physically placed in a different server. So we tried to use EJB3 entities as Transfer Objects. And… Surprise! We found out that the EJB3 Entities are instrumented Hibernate objects! So we had to put the Hibernate libraries in the remote TOMCAT client in order to work.</p>
<p>I was a bit surprised, and I posted this message in the <a href="http://www.jboss.com/index.html?module=bb&amp;op=viewtopic&amp;t=75971">JBoss.com – Forums – Attaching and detaching EJB3 Entities</a> asking for some help (JBoss guys answer promptly), and the answer was: ‘Put the hibernate jars in the client’. Ok… Thanks a lot… But… Is this what the specification says? If you read the <a href="http://sdlc-esd.sun.com/ESD20/JSCDL/ejb/3.0-pfd/ejb-3_0-pfd-spec-persistence.pdf?AuthParam=1138051670_d5a7be635521e3a0f4d89052f2629b4d&amp;TUrl=EMr8DPgljlCngjJlNnNDcFaPvU7tT+IO859ZF2EwLi4b1e0IkW/TF/LVaA==&amp;TicketId=dlV6NgVKMeg//Q==&amp;GroupName=SDLC&amp;BHost=sdlcweb9a.sun.com&amp;FilePath=/ESD20/JSCDL/ejb/3.0-pfd/ejb-3_0-pfd-spec-persistence.pdf&amp;File=ejb-3_0-pfd-spec-persistence.pdf">specification</a> in Chapter 3.2.4 ‘Detached Entities’, it is not clear if it’s mandatory to implement the Entities marked with fetch=EAGER without any kind of manipulation: <!-- raw HTML omitted -->The application may access the available state of available detached entity instances after the persistence <!-- raw HTML omitted --><!-- raw HTML omitted -->context ends. <!-- raw HTML omitted -->If you are using POJOs, and you are not using Hibernate explicitly, why do I need the Hibernate jars?</p>
<p>This problem has arisen too in the <a href="http://forums.java.net/jive/thread.jspa?messageID=36803&amp;tstart=0">Glassfish project</a>, and some people have suggested to implement some kind of <!-- raw HTML omitted -->transparent detaching <!-- raw HTML omitted -->of the POJOs before serialization. I think this is something the specification lacks of, and should be updated in order to fix this annoying problem.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2006/01/19/spanish-gov-uses-red-hat-and-nagios/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Spanish Gov. uses Red Hat and NAGIOS</span>
    </a>
    
    
    <a href="/2006/02/14/are-there-java-contractors-in-spain/" class="navigation-next">
      <span class="navigation-tittle">Are there Java contractors in Spain?</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  




  
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5807955-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>




    



    </body>
</html>
